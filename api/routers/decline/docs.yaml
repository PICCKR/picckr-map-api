paths:
  /api/decline:
    post:
      tags: [Decline]
      summary: Save a new decline
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SaveDeclineInput"
      responses:
        200:
          description: Decline Saved
        500:
          description: Error message
    get:
      tags: [Decline]
      summary: Get all declines
      responses:
        200:
          description: Declines
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Decline"
        500:
          description: Error message
  /api/decline/id/{id}:
    get:
      tags: [Decline]
      summary: Get a decline by id
      parameters:
        - name: id
          in: path
          required: true
          description: The decline id
          schema:
            type: string
          example: 6511d1d10764bc38955901b6
      responses:
        200:
          description: Decline
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Decline"
        500:
          description: Error message
    patch:
      tags: [Decline]
      summary: Update a decline
      parameters:
        - name: id
          in: path
          required: true
          description: The decline id
          schema:
            type: string
          example: 6511d1d10764bc38955901b6
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                type:
                  type: string
                  description: CANCEL | DISPUTE
              example:
                type: "DISPUTE"
      responses:
        200:
          description: Decline updated
        500:
          description: Error message
    delete:
      tags: [Decline]
      summary: Delete a decline
      parameters:
        - name: id
          in: path
          required: true
          description: The decline id
          schema:
            type: string
          example: 6511d1d10764bc38955901b6
      responses:
        200:
          description: Decline deleted
        500:
          description: Error message
  /api/decline/trackerid/{id}:
    get:
      tags: [Decline]
      summary: Get all declines by tracker id
      parameters:
        - name: id
          in: path
          required: true
          description: The tracker id
          schema:
            type: string
          example: 6511d1d10764bc38955901b6
      responses:
        200:
          description: Declines
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Decline"
        500:
          description: Error message
  /api/decline/driverid/{id}:
    get:
      tags: [Decline]
      summary: Get all declines by driver id
      parameters:
        - name: id
          in: path
          required: true
          description: The driver id
          schema:
            type: string
          example: 6511d1d10764bc38955901b6
      responses:
        200:
          description: Declines
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Decline"
        500:
          description: Error message
  /api/decline/cancels:
    get:
      tags: [Decline]
      summary: Get all declines with type CANCEL
      responses:
        200:
          description: Declines
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Decline"
        500:
          description: Error message
  /api/decline/disputes:
    get:
      tags: [Decline]
      summary: Get all declines with type DISPUTE
      responses:
        200:
          description: Declines
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Decline"
        500:
          description: Error message

components:
  schemas:
    SaveDeclineInput:
      type: object
      properties:
        declinedBy:
          type: string
          description: DRIVER | SENDER | TIMEOUT
        spentTime:
          type: number
          description: The spent time to decline
        trackerId:
          type: string
          description: The tracker id
        driverId:
          type: string
          description: The driver id
        senderId:
          type: string
          description: The sender id
      example:
        declinedBy: "DRIVER"
        spentTime: 10000
        trackerId: "5f7b1b8a9d6b2a0017a0d1b1"
        driverId: "5f7b1b8a9d6b2a0017a0d1c1"
        senderId: "5f7b1b8a9d6b2a0017a0d1d2"
    Decline:
      type: object
      properties:
        _id:
          type: string
          description: The decline id
        declinedBy:
          type: string
          description: DRIVER | SENDER | TIMEOUT
        spentTime:
          type: number
          description: The spent time until decline
        trackerId:
          type: string
          description: The tracker id
        driverId:
          type: string
          description: The driver id
        senderId:
          type: string
          description: The sender id
        type:
          type: string
          description: is it a CANCEL | DISPUTE (optional)
        createdAt:
          type: string
          description: The decline created date
        updatedAt:
          type: string
          description: The decline updated date

      example:
        _id: "5f7b1b8a9d6b2a0017a0d1b1"
        declinedBy: "DRIVER"
        spentTime: 10000
        trackerId: "5f7b1b8a9d6b2a0017a0d1b1"
        driverId: "5f7b1b8a9d6b2a0017a0d1c1"
        senderId: "5f7b1b8a9d6b2a0017a0d1d2"
        createdAt: "2020-10-05T14:00:00.000Z"
        updatedAt: "2020-10-05T14:00:00.000Z"
