{"openapi":"3.0.2","info":{"title":"REST API PicckR map","version":"1.0.0","description":"This is the REST API for PicckR map to manage orders through all the process from ordering, tracking and delivery"},"components":{"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}},"schemas":{"Driver":{"type":"object","properties":{"id":{"type":"string","description":"The driver id"},"identifier":{"type":"string","description":"The driver identifier from the other Driver object from the other microservice"},"location":{"type":"list","description":"The driver location","items":{"type":"number"},"minItems":2,"maxItems":2},"orders":{"type":"list","description":"The driver orders","items":{"type":"string","description":"The orders ids"}},"createdAt":{"type":"string","description":"The driver created date"},"updatedAt":{"type":"string","description":"The driver updated date"}},"required":["id","identifier"]},"CreateDriverInput":{"type":"object","properties":{"identifier":{"type":"string","description":"The driver identifier from the other Driver object from the other microservice"},"location":{"type":"list","description":"The driver location","items":{"type":"number"},"minItems":2,"maxItems":2}},"required":["identifier"]},"Order":{"type":"object","properties":{"id":{"type":"integer","description":"The order ID"},"bookingId":{"type":"string","description":"The booking ID"},"driverId":{"type":"string","description":"The driver ID"},"reply":{"type":"string","description":"The reply of the driver, (accept or reject)"},"status":{"type":"string","description":"The current status of the order, (canceled, completed)"},"createdAt":{"type":"string","description":"The date of creation of the order"},"updatedAt":{"type":"string","description":"The date of the last update of the order"}},"example":{"id":"64efb34cf479d2c90237ad59","bookingId":"64efb34cf479d2c90237ad59","driverId":"64efb34cf479d2c90237ad59","reply":null,"status":null,"createdAt":"2021-05-01T00:00:00.000Z","updatedAt":"2021-05-01T00:00:00.000Z"}},"CreateOrderInput":{"type":"object","properties":{"bookingId":{"type":"string","description":"The booking ID","required":true}},"example":{"bookingId":"64efb34cf479d2c90237ad59"}}}},"security":[{"bearerAuth":[]}],"servers":[{"url":"http://localhost:5050/","description":"PicckR REST API on Vercel"}],"paths":{"/api":{"get":{"summary":"Welcome to the PicckR Map API","tags":["Welcome"],"responses":{"200":{"description":"message \"Welcome to the PicckR Map API\""}}}},"/api/driver":{"get":{"summary":"Get all drivers","tags":["Driver"],"responses":{"200":{"description":"list of drivers"},"500":{"description":"message \"Internal server error\""}}},"post":{"summary":"Create a driver","tags":["Driver"],"requestBody":{"description":"The driver to create","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateDriverInput"}}}},"responses":{"201":{"description":"The driver created"},"409":{"description":"message \"Driver already exists\""},"500":{"description":"message \"Internal server error\""}}}},"/api/driver/id/{identifier}":{"get":{"summary":"Get driver by identifier","tags":["Driver"],"parameters":[{"name":"identifier","in":"path","description":"The driver identifier","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"The driver object"},"404":{"description":"message \"Driver not found\""},"500":{"description":"message \"Internal server error\""}}},"patch":{"summary":"Update driver location","tags":["Driver"],"parameters":[{"name":"identifier","in":"path","description":"The driver identifier","required":true,"schema":{"type":"string"}}],"requestBody":{"description":"The driver location to update","required":true,"content":{"application/json":{"schema":{"type":"list","description":"The driver location","items":{"type":"number"},"minItems":2,"maxItems":2}}}},"responses":{"200":{"description":"The driver object"},"404":{"description":"message \"Driver not found\""},"500":{"description":"message \"Internal server error\""}}},"delete":{"summary":"Delete driver by identifier","tags":["Driver"],"parameters":[{"name":"identifier","in":"path","description":"The driver identifier","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"The driver object"},"404":{"description":"message \"Driver not found\" and an error object"}}}},"/api/driver/locations":{"get":{"summary":"Get all drivers locations","tags":["Driver"],"responses":{"200":{"description":"list of drivers locations with their identifiers"},"500":{"description":"message \"Internal server error\""}}}},"/api/driver/id/{identifier}/location":{"patch":{"summary":"Update driver location","tags":["Driver"],"parameters":[{"name":"identifier","in":"path","description":"The driver identifier","required":true,"schema":{"type":"string"}}],"requestBody":{"description":"The driver location to update","required":true,"content":{"application/json":{"schema":{"type":"list","description":"The driver location","items":{"type":"number"},"minItems":2,"maxItems":2}}}},"responses":{"200":{"description":"The driver new location"},"400":{"description":"message \"Location is not valid\""},"500":{"description":"message \"Internal server error\""}}}},"/api/location/nearby/drivers/{max}":{"post":{"summary":"Get nearby drivers list with length max","tags":["Location"],"parameters":[{"name":"max","in":"path","required":true,"description":"The max length of the drivers list you like","schema":{"type":"integer","minimum":1,"maximum":100},"example":10}],"requestBody":{"description":"Specifying the 'targetLocation' (destination)","required":true,"content":{"application/json":{"schema":{"type":"string"},"example":{"targetLocation":"33.960535, -6.859669"}}}},"responses":{"200":{"description":"The nearby locations list"}}}},"/api/order":{"get":{"summary":"Get all orders","tags":["Order"],"responses":{"200":{"description":"message \"Get all orders\""}}},"post":{"summary":"Create a new order","tags":["Order"],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateOrderInput"}}}},"responses":{"200":{"description":"message \"Create a new order\""},"400":{"description":"message \"Invalid request body\""},"409":{"description":"message \"Order with bookingId already exists\""}}}},"/api/order/id/{id}":{"get":{"summary":"Get order by id","tags":["Order"],"parameters":[{"name":"id","in":"path","required":true,"description":"The order id","schema":{"type":"string"}}],"responses":{"200":{"description":"message \"Get order by id\""},"404":{"description":"message \"Order not found\""}}},"delete":{"summary":"Delete order by id","tags":["Order"],"parameters":[{"name":"id","in":"path","required":true,"description":"The order id","schema":{"type":"string"}}],"responses":{"200":{"description":"message \"Delete order by id\""},"404":{"description":"message \"Order with id wasn't deleted\" and error object"}}}}},"tags":[]}